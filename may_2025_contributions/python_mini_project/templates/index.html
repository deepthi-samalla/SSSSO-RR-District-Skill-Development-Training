<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Word Scramble Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg-light d-flex flex-column justify-content-center align-items-center vh-100">
    <div class="card shadow p-4 text-center" style="max-width: 400px; width: 100%;">
        <h2 class="mb-3">Word Scramble</h2>
        <p class="scrambled-word fs-3 fw-bold text-primary" id="scrambledWord">Loading...</p>
        <input type="text" class="form-control mb-3" id="guessInput" placeholder="Your guess">
        <button class="btn btn-success w-100 mb-2" onclick="submitGuess()">Submit</button>
        <button class="btn btn-secondary w-100" onclick="getNewWord()">New Word</button>
        <p class="mt-3" id="resultText"></p>
    </div>

    <script>
        async function getNewWord() {
            const res = await fetch("/get_word");
            const data = await res.json();
            document.getElementById("scrambledWord").textContent = data.scrambled;
            document.getElementById("guessInput").value = "";
            document.getElementById("resultText").textContent = "";
        }

        async function submitGuess() {
            const guess = document.getElementById("guessInput").value;
            const res = await fetch("/check", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ guess: guess })
            });
            const data = await res.json();
            const result = document.getElementById("resultText");
            if (data.correct) {
                result.textContent = "üéâ Correct!";
                result.className = "text-success";
            } else {
                result.textContent = `‚ùå Incorrect. The word was "${data.word}".`;
                result.className = "text-danger";
            }
        }

        window.onload = getNewWord;
    </script>
</body>
</html>
